{
    use esmith::HostsDB;
    my $hdb = esmith::HostsDB->open_ro();

    foreach $host ($hdb->hosts)
    {
        my $MACAddress = $host->prop('MACAddress') || '';
        next unless ( ($MACAddress eq '') ); # skip all dhcp static entries
        
	next unless ($host->prop('HostType') ne 'Self'); # skip all local alias

        my $IPAddress = $host->prop('IPAddress') || '';
        next unless ($IPAddress ne ''); # skip all entries without an IP
        
	my $Comment = $host->prop('Comment') || "";
        $OUT .= "# $Comment\n" unless ($Comment eq "");
        $OUT .= "$IPAddress\t".$host->key."\n";
    }
    undef;      # We need a return value
}
